/* autogenerated by Processing revision 1293 on 2023-10-07 */
import processing.core.*;
import processing.data.*;
import processing.event.*;
import processing.opengl.*;

import java.util.HashMap;
import java.util.ArrayList;
import java.io.File;
import java.io.BufferedReader;
import java.io.PrintWriter;
import java.io.InputStream;
import java.io.OutputStream;
import java.io.IOException;

public class DaenenVockeroth_Variables extends PApplet {

String storedNumber = "";

// Instantiate the room objects
Room myRoom = new Room(50, 50, 20, false);
Room myRoom2 = new Room(50, 150, 20, true);

// Setup size and unlimited framerate
public void setup() {
    frameRate(-1);
    /* size commented out by preprocessor */;
}

// Set colors and render values and results
public void draw() {
    background(255);
    fill(0);
    myRoom.renderValues();
    myRoom2.renderValues();
    fill(0);
    myRoom.renderResult();
    myRoom2.renderResult();
    //println(mouseX + " | " + mouseY);
}

public void keyPressed() {
    if (key >= 48 && key <= 57) {
        storedNumber += key;
        myRoom2.setValue(storedNumber);
    } else if (key == BACKSPACE) {
        storedNumber = "0";
        myRoom2.setValue(storedNumber);
    }      
}

// Create room class
class Room {
    // Define default values
    float defaultLength = random(0, 50), defaultWidth = random(0, 50), defaultHeight = random(0, 50);
    // Set class vars
    float _xPos, _yPos, _fontSize, _length = 0, _width = 0, _height = 0;
    boolean _userMode;
    int _activeLine = -1;

    // Accept and set paramaters
    Room(int xPos, int yPos, float fontSize, boolean userMode) {
        _xPos = xPos;
        _yPos = yPos;
        _fontSize = fontSize;
        _userMode = userMode;

        // Check if we are in user mode. If not, set values to default
        if (!userMode) {
            _length = defaultLength;
            _height = defaultHeight;
            _width = defaultWidth;
        }
    }
        // Setup rendering for the values
        public void renderValues() {
            textSize(_fontSize);
            if (_activeLine == 0) { fill(0, 200, 40); } else { fill(0); }
            text(str(_length), _xPos, _yPos);
            if (_activeLine == 1) { fill(0, 200, 40); } else { fill(0); }
            text(str(_width), _xPos, _yPos + 30);
            if (_activeLine == 2) { fill(0, 200, 40); } else { fill(0); }
            text(str(_height), _xPos, _yPos + 60);
            
            // Add boxes around usermode values to differentiate and show that input is allowed.
            if (_userMode) {
                fill(0, 0, 0, 0);
                rect(_xPos + 1, _yPos - 20, 100, 90);
                line(_xPos, _yPos + 8, _xPos + 102, _yPos + 8);
                line(_xPos, _yPos + 38, _xPos + 102, _yPos + 38);

                // Ugly but working nested if statements to check if the mouse is inside each box
                if (mouseX >= 51 && mouseX <= 151) {
                    if (mouseY >= 129 && mouseY <= 157 && mousePressed) {
                        _activeLine = 0;
                    } else if (mouseY > 158 && mouseY < 185 && mousePressed) {
                        _activeLine = 1;
                    } else if (mouseY > 186 && mouseY < 220 && mousePressed) {
                        _activeLine = 2;
                    } else if (mousePressed) {
                        _activeLine = -1;
                    }
                }
                else if (mousePressed) {
                    _activeLine = -1;
                }
            }
        }

        public void setValue(String value) {
           switch (_activeLine) {
            case -1:
                return;
            case 0:
                _length = PApplet.parseFloat(value);
            break;
            case 1:
                _width = PApplet.parseFloat(value);
            break;
            case 2:
                _height = PApplet.parseFloat(value);
            break;
           }
        }

        // Render result
        public void renderResult() {
            float result = _length * _width * _height;
            text(result, _xPos + 150, _yPos +32);
        }
}


  public void settings() { size(500, 500); }

  static public void main(String[] passedArgs) {
    String[] appletArgs = new String[] { "DaenenVockeroth_Variables" };
    if (passedArgs != null) {
      PApplet.main(concat(appletArgs, passedArgs));
    } else {
      PApplet.main(appletArgs);
    }
  }
}
